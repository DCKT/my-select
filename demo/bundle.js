(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var Select = require('../lib/select');

document.addEventListener('DOMContentLoaded', function () {
  var select = new Select({
    select: '.test',
    container: '#bloc' });

  select.on('change', function (value) {
    console.log(value);
  });
}, false);

},{"../lib/select":5}],2:[function(require,module,exports){
'use strict';

var CLASSNAME = require('./constants.js').CLASSNAME;

module.exports = function (option, select, _this) {
  option.addEventListener('click', function () {
    var id = this.getAttribute('data-select-id');
    select.value = this.getAttribute('data-value');
    _this.selectedValue = this.getAttribute('data-value');
    document.querySelector('.' + CLASSNAME.LABEL + '-' + id).innerHTML = this.innerHTML;
    _this.hideLists();
    _this.events.change ? _this.events.change(_this.selectedValue) : null;
  }, false);
};

},{"./constants.js":3}],3:[function(require,module,exports){
'use strict';

module.exports = {
  CLASSNAME: {
    LABEL: 'js-myselect-label',
    LABEL_FOCUS: 'js-myselect-label--focus',
    LIST_VALUES: 'js-myselect-list-values',
    LIST_VALUES_VISIBLE: 'js-myselect-list-values--visible',
    ITEM: 'js-myselect-item' } };

},{}],4:[function(require,module,exports){
'use strict';

var CLASSNAME = require('./constants.js').CLASSNAME;
var showDropdown = require('./showDropDown.js');
var bindClickOptions = require('./bindClickOptions.js');

module.exports = function (select, container, id) {
  var _this2 = this;

  var label = document.createElement('div');
  var valuesList = document.createElement('div');
  var _this = this;

  label.className = '' + CLASSNAME.LABEL + ' ' + CLASSNAME.LABEL + '-' + id;
  valuesList.className = CLASSNAME.LIST_VALUES;

  label.innerHTML = select.selectedOptions[0].innerHTML;

  label.addEventListener('click', function (e) {
    if (_this.isDevice && _this.nativeOnDevice) {
      _this.showDropdown(select);
    } else {
      this.classList.add(CLASSNAME.LABEL_FOCUS);
      this.nextSibling.classList.add(CLASSNAME.LIST_VALUES_VISIBLE);
    }
  });

  this.fakeSelect = label;

  [].forEach.call(select.children, function (option, index) {
    var divOption = document.createElement('div');

    divOption.className = CLASSNAME.ITEM;
    divOption.innerHTML = option.innerHTML;
    divOption.setAttribute('data-value', option.getAttribute('value'));
    divOption.setAttribute('data-select-id', id);
    valuesList.appendChild(divOption);

    bindClickOptions(divOption, select, _this2);
  });

  container.appendChild(label);
  container.appendChild(valuesList);
};

},{"./bindClickOptions.js":2,"./constants.js":3,"./showDropDown.js":6}],5:[function(require,module,exports){
"use strict";function bindClickOut() {
  var e = this;document.addEventListener("click", function (t) {
    var n = t.target.classList;n.contains(CLASSNAME.LABEL) || n.contains(CLASSNAME.ITEM) || e.hideLists();
  }, !1);
}var _classCallCheck = function _classCallCheck(e, t) {
  if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
},
    _createClass = (function () {
  function e(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);
    }
  }return function (t, n, i) {
    return (n && e(t.prototype, n), i && e(t, i), t);
  };
})(),
    CLASSNAME = require("./constants.js").CLASSNAME,
    createDOMElements = require("./createDOMElements.js"),
    i = 0,
    Select = (function () {
  function e(t) {
    if ((_classCallCheck(this, e), !t || !t.select || !t.container)) {
      return void console.error("my-select error : Missing options");
    }var n = t.select,
        s = t.container;return (this.select = document.querySelector(n), this.container = document.querySelector(s), this.selectedValue = null, this.fakeSelect = null, this.events = {}, this.id = i, this.nativeOnDevice = !!t.nativeOnDevice, this.isDevice = "ontouchstart" in document.documentElement, this.select ? this.container ? (createDOMElements.call(this, this.select, this.container, this.id), void bindClickOut.call(this)) : void console.error("my-select error : container Node not found") : void console.error("my-select error : select Node not found"));
  }return (_createClass(e, [{ key: "hideLists", value: function value() {
      this.fakeSelect.classList.remove(CLASSNAME.LABEL_FOCUS), this.fakeSelect.nextSibling.classList.remove(CLASSNAME.LIST_VALUES_VISIBLE);
    } }, { key: "on", value: function value(e, t) {
      this.events[e] = t.bind(this);
    } }]), e);
})();module.exports = Select;

},{"./constants.js":3,"./createDOMElements.js":4}],6:[function(require,module,exports){
'use strict';

module.exports = function (element) {
  var event;
  event = document.createEvent('MouseEvents');
  event.initMouseEvent('mousedown', true, true, window);
  element.dispatchEvent(event);
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvRENLL0NvZGUvR2l0aHViL215LXNlbGVjdC9kZW1vL2FwcC5qcyIsIi9Vc2Vycy9EQ0svQ29kZS9HaXRodWIvbXktc2VsZWN0L2xpYi9iaW5kQ2xpY2tPcHRpb25zLmpzIiwiL1VzZXJzL0RDSy9Db2RlL0dpdGh1Yi9teS1zZWxlY3QvbGliL2NvbnN0YW50cy5qcyIsIi9Vc2Vycy9EQ0svQ29kZS9HaXRodWIvbXktc2VsZWN0L2xpYi9jcmVhdGVET01FbGVtZW50cy5qcyIsIi9Vc2Vycy9EQ0svQ29kZS9HaXRodWIvbXktc2VsZWN0L2xpYi9zZWxlY3QuanMiLCIvVXNlcnMvRENLL0NvZGUvR2l0aHViL215LXNlbGVjdC9saWIvc2hvd0Ryb3BEb3duLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7O0FBRXRDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFXO0FBQ3ZELE1BQUksTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDO0FBQ3RCLFVBQU0sRUFBRSxPQUFPO0FBQ2YsYUFBUyxFQUFFLE9BQU8sRUFDbkIsQ0FBQyxDQUFDOztBQUVILFFBQU0sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQVMsS0FBSyxFQUFFO0FBQ2xDLFdBQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7R0FDcEIsQ0FBQyxDQUFDO0NBQ0osRUFBRSxLQUFLLENBQUMsQ0FBQzs7Ozs7QUNYVixJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxTQUFTLENBQUM7O0FBRXBELE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBUyxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtBQUMvQyxRQUFNLENBQUMsZ0JB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QUMsRUFBQyxJQUFJLENBQUMsU0FBUyxHQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUMsSUFBSSxDQUFDLGFBQWEsR0FBQyxJQUFJLEVBQUMsSUFBSSxDQUFDLFVBQVUsR0FBQyxJQUFJLEVBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxFQUFFLEVBQUMsSUFBSSxDQUFDLEVBQUUsR0FBQyxDQUFDLEVBQUMsSUFBSSxDQUFDLGNBQWMsR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBQyxJQUFJLENBQUMsUUFBUSxHQUFDLGNBQWMsSUFBRyxRQUFRLENBQUMsZUFBZSxFQUFDLElBQUksQ0FBQyxNQUFNLEdBQUMsSUFBSSxDQUFDLFNBQVMsSUFBRSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFDLElBQUksQ0FBQyxNQUFNLEVBQUMsSUFBSSxDQUFDLFNBQVMsRUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUMsS0FBSyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBLEdBQUUsS0FBSyxPQUFPLENBQUMsS0FBSyxDQUFDLDRDQUE0QyxDQUFDLEdBQUMsS0FBSyxPQUFPLENBQUMsS0FBSyxDQUFDLHlDQUF5QyxDQUFDLENBQUEsQ0FBQTtHQUFDLFFBQU8sWUFBWSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLFdBQVcsRUFBQyxLQUFLLEVBQUMsaUJBQVU7QUFBQyxVQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUFDLENBQUE7S0FBQyxFQUFDLEVBQUMsRUFBQyxHQUFHLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxlQUFTLENBQUMsRUFBQyxDQUFDLEVBQUM7QUFBQyxVQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7S0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQSxDQUFBO0NBQUMsQ0FBQSxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBQyxNQUFNLENBQUM7Ozs7O0FDQXpsRCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVMsT0FBTyxFQUFFO0FBQ2pDLE1BQUksS0FBSyxDQUFDO0FBQ1YsT0FBSyxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDNUMsT0FBSyxDQUFDLGNBQWMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN0RCxTQUFPLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0NBQzlCLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIFNlbGVjdCA9IHJlcXVpcmUoJy4uL2xpYi9zZWxlY3QnKTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICB2YXIgc2VsZWN0ID0gbmV3IFNlbGVjdCh7XG4gICAgc2VsZWN0OiAnLnRlc3QnLFxuICAgIGNvbnRhaW5lcjogJyNibG9jJyxcbiAgfSk7XG5cbiAgc2VsZWN0Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgfSk7XG59LCBmYWxzZSk7XG4iLCJ2YXIgQ0xBU1NOQU1FID0gcmVxdWlyZSgnLi9jb25zdGFudHMuanMnKS5DTEFTU05BTUU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3B0aW9uLCBzZWxlY3QsIF90aGlzKSB7XG4gIG9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZCAgICAgICAgICAgICAgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1zZWxlY3QtaWQnKTtcbiAgICBzZWxlY3QudmFsdWUgICAgICAgID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTtcbiAgICBfdGhpcy5zZWxlY3RlZFZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtDTEFTU05BTUUuTEFCRUx9LSR7aWR9YCkuaW5uZXJIVE1MID0gdGhpcy5pbm5lckhUTUw7XG4gICAgX3RoaXMuaGlkZUxpc3RzKCk7XG4gICAgX3RoaXMuZXZlbnRzLmNoYW5nZSA/IF90aGlzLmV2ZW50cy5jaGFuZ2UoX3RoaXMuc2VsZWN0ZWRWYWx1ZSkgOiBudWxsO1xuICB9LCBmYWxzZSk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIENMQVNTTkFNRToge1xuICAgIExBQkVMOiAnanMtbXlzZWxlY3QtbGFiZWwnLFxuICAgIExBQkVMX0ZPQ1VTOiAnanMtbXlzZWxlY3QtbGFiZWwtLWZvY3VzJyxcbiAgICBMSVNUX1ZBTFVFUzogJ2pzLW15c2VsZWN0LWxpc3QtdmFsdWVzJyxcbiAgICBMSVNUX1ZBTFVFU19WSVNJQkxFOiAnanMtbXlzZWxlY3QtbGlzdC12YWx1ZXMtLXZpc2libGUnLFxuICAgIElURU06ICdqcy1teXNlbGVjdC1pdGVtJyxcbiAgfSxcbn07XG4iLCJ2YXIgQ0xBU1NOQU1FICAgICAgICA9IHJlcXVpcmUoJy4vY29uc3RhbnRzLmpzJykuQ0xBU1NOQU1FO1xudmFyIHNob3dEcm9wZG93biAgICAgPSByZXF1aXJlKCcuL3Nob3dEcm9wRG93bi5qcycpO1xudmFyIGJpbmRDbGlja09wdGlvbnMgPSByZXF1aXJlKCcuL2JpbmRDbGlja09wdGlvbnMuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzZWxlY3QsIGNvbnRhaW5lciwgaWQpIHtcbiAgdmFyIGxhYmVsICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdmFyIHZhbHVlc0xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdmFyIF90aGlzICAgICAgPSB0aGlzO1xuXG4gIGxhYmVsLmNsYXNzTmFtZSAgICAgID0gYCR7Q0xBU1NOQU1FLkxBQkVMfSAke0NMQVNTTkFNRS5MQUJFTH0tJHtpZH1gO1xuICB2YWx1ZXNMaXN0LmNsYXNzTmFtZSA9IENMQVNTTkFNRS5MSVNUX1ZBTFVFUztcblxuICBsYWJlbC5pbm5lckhUTUwgPSBzZWxlY3Quc2VsZWN0ZWRPcHRpb25zWzBdLmlubmVySFRNTDtcblxuICBsYWJlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoX3RoaXMuaXNEZXZpY2UgJiYgX3RoaXMubmF0aXZlT25EZXZpY2UpIHtcbiAgICAgIF90aGlzLnNob3dEcm9wZG93bihzZWxlY3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FLkxBQkVMX0ZPQ1VTKTtcbiAgICAgIHRoaXMubmV4dFNpYmxpbmcuY2xhc3NMaXN0LmFkZChDTEFTU05BTUUuTElTVF9WQUxVRVNfVklTSUJMRSk7XG4gICAgfVxuICB9KTtcblxuICB0aGlzLmZha2VTZWxlY3QgPSBsYWJlbDtcblxuICBbXS5mb3JFYWNoLmNhbGwoc2VsZWN0LmNoaWxkcmVuLCAob3B0aW9uLCBpbmRleCkgPT4ge1xuICAgIHZhciBkaXZPcHRpb24gICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGRpdk9wdGlvbi5jbGFzc05hbWUgPSBDTEFTU05BTUUuSVRFTTtcbiAgICBkaXZPcHRpb24uaW5uZXJIVE1MID0gb3B0aW9uLmlubmVySFRNTDtcbiAgICBkaXZPcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgb3B0aW9uLmdldEF0dHJpYnV0ZSgndmFsdWUnKSk7XG4gICAgZGl2T3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS1zZWxlY3QtaWQnLCBpZCk7XG4gICAgdmFsdWVzTGlzdC5hcHBlbmRDaGlsZChkaXZPcHRpb24pO1xuXG4gICAgYmluZENsaWNrT3B0aW9ucyhkaXZPcHRpb24sIHNlbGVjdCwgdGhpcyk7XG4gIH0pO1xuXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh2YWx1ZXNMaXN0KTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiaW5kQ2xpY2tPdXQoKXt2YXIgZT10aGlzO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKHQpe3ZhciBuPXQudGFyZ2V0LmNsYXNzTGlzdDtuLmNvbnRhaW5zKENMQVNTTkFNRS5MQUJFTCl8fG4uY29udGFpbnMoQ0xBU1NOQU1FLklURU0pfHxlLmhpZGVMaXN0cygpfSwhMSl9dmFyIF9jbGFzc0NhbGxDaGVjaz1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9LF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9dFtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbih0LG4saSl7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksaSYmZSh0LGkpLHR9fSgpLENMQVNTTkFNRT1yZXF1aXJlKFwiLi9jb25zdGFudHMuanNcIikuQ0xBU1NOQU1FLGNyZWF0ZURPTUVsZW1lbnRzPXJlcXVpcmUoXCIuL2NyZWF0ZURPTUVsZW1lbnRzLmpzXCIpLGk9MCxTZWxlY3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2lmKF9jbGFzc0NhbGxDaGVjayh0aGlzLGUpLCF0fHwhdC5zZWxlY3R8fCF0LmNvbnRhaW5lcilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwibXktc2VsZWN0IGVycm9yIDogTWlzc2luZyBvcHRpb25zXCIpO3ZhciBuPXQuc2VsZWN0LHM9dC5jb250YWluZXI7cmV0dXJuIHRoaXMuc2VsZWN0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobiksdGhpcy5jb250YWluZXI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSx0aGlzLnNlbGVjdGVkVmFsdWU9bnVsbCx0aGlzLmZha2VTZWxlY3Q9bnVsbCx0aGlzLmV2ZW50cz17fSx0aGlzLmlkPWksdGhpcy5uYXRpdmVPbkRldmljZT0hIXQubmF0aXZlT25EZXZpY2UsdGhpcy5pc0RldmljZT1cIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMuc2VsZWN0P3RoaXMuY29udGFpbmVyPyhjcmVhdGVET01FbGVtZW50cy5jYWxsKHRoaXMsdGhpcy5zZWxlY3QsdGhpcy5jb250YWluZXIsdGhpcy5pZCksdm9pZCBiaW5kQ2xpY2tPdXQuY2FsbCh0aGlzKSk6dm9pZCBjb25zb2xlLmVycm9yKFwibXktc2VsZWN0IGVycm9yIDogY29udGFpbmVyIE5vZGUgbm90IGZvdW5kXCIpOnZvaWQgY29uc29sZS5lcnJvcihcIm15LXNlbGVjdCBlcnJvciA6IHNlbGVjdCBOb2RlIG5vdCBmb3VuZFwiKX1yZXR1cm4gX2NyZWF0ZUNsYXNzKGUsW3trZXk6XCJoaWRlTGlzdHNcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZmFrZVNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTTkFNRS5MQUJFTF9GT0NVUyksdGhpcy5mYWtlU2VsZWN0Lm5leHRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FLkxJU1RfVkFMVUVTX1ZJU0lCTEUpfX0se2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLmV2ZW50c1tlXT10LmJpbmQodGhpcyl9fV0pLGV9KCk7bW9kdWxlLmV4cG9ydHM9U2VsZWN0OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICB2YXIgZXZlbnQ7XG4gIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gIGV2ZW50LmluaXRNb3VzZUV2ZW50KCdtb3VzZWRvd24nLCB0cnVlLCB0cnVlLCB3aW5kb3cpO1xuICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufTtcbiJdfQ==
