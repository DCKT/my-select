(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var Select = require('../lib/select');

document.addEventListener('DOMContentLoaded', function () {
  var select = new Select({
    select: '.test',
    container: '#bloc' });

  select.on('change', function (value) {
    console.log(value);
  });
}, false);

},{"../lib/select":5}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _CLASSNAME = require('./constants.js');

exports['default'] = function (option, select, _this) {
  option.addEventListener('click', function () {
    var id = this.getAttribute('data-select-id');
    select.value = this.getAttribute('data-value');
    _this.selectedValue = this.getAttribute('data-value');
    document.querySelector('.' + _CLASSNAME.CLASSNAME.LABEL + '-' + id).innerHTML = this.innerHTML;
    _this.hideLists();
    _this.events.change ? _this.events.change(_this.selectedValue) : null;
  }, false);
};

module.exports = exports['default'];

},{"./constants.js":3}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports['default'] = {
  CLASSNAME: {
    LABEL: 'js-myselect-label',
    LABEL_FOCUS: 'js-myselect-label--focus',
    LIST_VALUES: 'js-myselect-list-values',
    LIST_VALUES_VISIBLE: 'js-myselect-list-values--visible',
    ITEM: 'js-myselect-item' } };
module.exports = exports['default'];

},{}],4:[function(require,module,exports){
'use strict';

var _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { 'default': obj }; };

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _CLASSNAME = require('./constants.js');

var _showDropdown = require('./showDropDown.js');

var _showDropdown2 = _interopRequireWildcard(_showDropdown);

var _bindClickOptions = require('./bindClickOptions.js');

var _bindClickOptions2 = _interopRequireWildcard(_bindClickOptions);

exports['default'] = function (select, container, id) {
  var _this2 = this;

  var label = document.createElement('div');
  var valuesList = document.createElement('div');
  var _this = this;

  label.className = '' + _CLASSNAME.CLASSNAME.LABEL + ' ' + _CLASSNAME.CLASSNAME.LABEL + '-' + id;
  valuesList.className = _CLASSNAME.CLASSNAME.LIST_VALUES;

  label.innerHTML = select.selectedOptions[0].innerHTML;

  label.addEventListener('click', function (e) {
    if (_this.isDevice && _this.nativeOnDevice) {
      _this.showDropdown(select);
    } else {
      this.classList.add(_CLASSNAME.CLASSNAME.LABEL_FOCUS);
      this.nextSibling.classList.add(_CLASSNAME.CLASSNAME.LIST_VALUES_VISIBLE);
    }
  });

  this.fakeSelect = label;

  [].forEach.call(select.children, function (option, index) {
    var divOption = document.createElement('div');

    divOption.className = _CLASSNAME.CLASSNAME.ITEM;
    divOption.innerHTML = option.innerHTML;
    divOption.setAttribute('data-value', option.getAttribute('value'));
    divOption.setAttribute('data-select-id', id);
    valuesList.appendChild(divOption);

    _bindClickOptions2['default'](divOption, select, _this2);
  });

  container.appendChild(label);
  container.appendChild(valuesList);
};

module.exports = exports['default'];

},{"./bindClickOptions.js":2,"./constants.js":3,"./showDropDown.js":6}],5:[function(require,module,exports){
"use strict";function bindClickOut() {
  var e = this;document.addEventListener("click", function (t) {
    var n = t.target.classList;n.contains(_CLASSNAME.CLASSNAME.LABEL) || n.contains(_CLASSNAME.CLASSNAME.ITEM) || e.hideLists();
  }, !1);
}var _interopRequireWildcard = function _interopRequireWildcard(e) {
  return e && e.__esModule ? e : { "default": e };
},
    _classCallCheck = function _classCallCheck(e, t) {
  if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
},
    _createClass = (function () {
  function e(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);
    }
  }return function (t, n, i) {
    return (n && e(t.prototype, n), i && e(t, i), t);
  };
})(),
    _CLASSNAME = require("./constants.js"),
    _createDOMElements = require("./createDOMElements.js"),
    _createDOMElements2 = _interopRequireWildcard(_createDOMElements),
    i = 0,
    Select = (function () {
  function e(t) {
    if ((_classCallCheck(this, e), !t || !t.select || !t.container)) {
      return void console.error("my-select error : Missing options");
    }var n = t.select,
        r = t.container;return (this.select = document.querySelector(n), this.container = document.querySelector(r), this.selectedValue = null, this.fakeSelect = null, this.events = {}, this.id = i, this.nativeOnDevice = !!t.nativeOnDevice, this.isDevice = "ontouchstart" in document.documentElement, this.select ? this.container ? (_createDOMElements2["default"].call(this, this.select, this.container, this.id), void bindClickOut.call(this)) : void console.error("my-select error : container Node not found") : void console.error("my-select error : select Node not found"));
  }return (_createClass(e, [{ key: "hideLists", value: function value() {
      this.fakeSelect.classList.remove(_CLASSNAME.CLASSNAME.LABEL_FOCUS), this.fakeSelect.nextSibling.classList.remove(_CLASSNAME.CLASSNAME.LIST_VALUES_VISIBLE);
    } }, { key: "on", value: function value(e, t) {
      this.events[e] = t.bind(this);
    } }]), e);
})();module.exports = Select;

},{"./constants.js":3,"./createDOMElements.js":4}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

exports['default'] = function (element) {
  var event;
  event = document.createEvent('MouseEvents');
  event.initMouseEvent('mousedown', true, true, window);
  element.dispatchEvent(event);
};

module.exports = exports['default'];

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvRENLL0NvZGUvR2l0aHViL215LXNlbGVjdC9kZW1vL2FwcC5qcyIsIi9Vc2Vycy9EQ0svQ29kZS9HaXRodWIvbXktc2VsZWN0L2xpYi9iaW5kQ2xpY2tPcHRpb25zLmpzIiwiL1VzZXJzL0RDSy9Db2RlL0dpdGh1Yi9teS1zZWxlY3QvbGliL2NvbnN0YW50cy5qcyIsIi9Vc2Vycy9EQ0svQ29kZS9HaXRodWIvbXktc2VsZWN0L2xpYi9jcmVhdGVET01FbGVtZW50cy5qcyIsIi9Vc2Vycy9EQ0svQ29kZS9HaXRodWIvbXktc2VsZWN0L2xpYi9zZWxlY3QuanMiLCIvVXNlcnMvRENLL0NvZGUvR2l0aHViL215LXNlbGVjdC9saWIvc2hvd0Ryb3BEb3duLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7O0FBRXRDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFXO0FBQ3ZELE1BQUksTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDO0FBQ3RCLFVBQU0sRUFBRSxPQUFPO0FBQ2YsYUFBUyxFQUFFLE9BQU8sRUFDbkIsQ0FBQyxDQUFDOztBQUVILFFBQU0sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQVMsS0FBSyxFQUFFO0FBQ2xDLFdBQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7R0FDcEIsQ0FBQyxDQUFDO0NBQ0osRUFBRSxLQUFLLENBQUMsQ0FBQzs7Ozs7Ozs7O3lCQ1hnQixnQkFBZ0I7O3FCQUUzQixVQUFTLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO0FBQzdDLFFBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBVztBQUMxQyxRQUFJLEVBQUUsR0FBZ0IsSUFBSSxDQUFDLFlB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QUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsR0FBQyxDQUFDLENBQUMsVUFBVSxJQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxZQUFZLEdBQUMsQ0FBQyxDQUFDLEVBQUMsT0FBTyxJQUFHLENBQUMsS0FBRyxDQUFDLENBQUMsUUFBUSxHQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsRUFBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQyxDQUFBO0tBQUM7R0FBQyxPQUFPLFVBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUM7QUFBQyxZQUFPLENBQUMsSUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUEsQ0FBQTtHQUFDLENBQUE7Q0FBQyxDQUFBLEVBQUU7SUFBQyxVQUFVLEdBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0lBQUMsa0JBQWtCLEdBQUMsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0lBQUMsbUJBQW1CLEdBQUMsdUJBQXVCLENBQUMsa0JBQWtCLENBQUM7SUFBQyxDQUFDLEdBQUMsQ0FBQztJQUFDLE1BQU0sR0FBQyxDQUFBLFlBQVU7QUFBQyxXQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUM7QUFBQyxTQUFHLGVBQWUsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQTtBQUFDLGFBQU8sS0FBSyxPQUFPLENBQUMsS0FBSyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7S0FBQSxJQUFJLENBQUMsR0FBQyxDQUFDLENBQUMsTUFBTTtRQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQU8sSUFBSSxDQUFDLE1BQU0sR0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFDLElBQUksQ0FBQyxTQUFTLEdBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsRUFBQyxJQUFJLENBQUMsYUFBYSxHQUFDLElBQUksRUFBQyxJQUFJLENBQUMsVUFBVSxHQUFDLElBQUksRUFBQyxJQUFJLENBQUMsTUFBTSxHQUFDLEVBQUUsRUFBQyxJQUFJLENBQUMsRUFBRSxHQUFDLENBQUMsRUFBQyxJQUFJLENBQUMsY0FBYyxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxFQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsY0FBYyxJQUFHLFFBQVEsQ0FBQyxlQUFlLEVBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxJQUFJLENBQUMsU0FBUyxJQUFFLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUMsSUFBSSxDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsU0FBUyxFQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBQyxLQUFLLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUEsR0FBRSxLQUFLLE9BQU8sQ0FBQyxLQUFLLENBQUMsNENBQTRDLENBQUMsR0FBQyxLQUFLLE9BQU8sQ0FBQyxLQUFLLENBQUMseUNBQXlDLENBQUMsQ0FBQSxDQUFBO0dBQUMsUUFBTyxZQUFZLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsV0FBVyxFQUFDLEtBQUssRUFBQyxpQkFBVTtBQUFDLFVBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFBO0tBQUMsRUFBQyxFQUFDLEVBQUMsR0FBRyxFQUFDLElBQUksRUFBQyxLQUFLLEVBQUMsZUFBUyxDQUFDLEVBQUMsQ0FBQyxFQUFDO0FBQUMsVUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0tBQUMsRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUEsQ0FBQTtDQUFDLENBQUEsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUMsTUFBTSxDQUFDOzs7Ozs7Ozs7cUJDQXZ3RCxVQUFTLE9BQU8sRUFBRTtBQUMvQixNQUFJLEtBQUssQ0FBQztBQUNWLE9BQUssR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzVDLE9BQUssQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDdEQsU0FBTyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztDQUM5QiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgU2VsZWN0ID0gcmVxdWlyZSgnLi4vbGliL3NlbGVjdCcpO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gIHZhciBzZWxlY3QgPSBuZXcgU2VsZWN0KHtcbiAgICBzZWxlY3Q6ICcudGVzdCcsXG4gICAgY29udGFpbmVyOiAnI2Jsb2MnLFxuICB9KTtcblxuICBzZWxlY3Qub24oJ2NoYW5nZScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgY29uc29sZS5sb2codmFsdWUpO1xuICB9KTtcbn0sIGZhbHNlKTtcbiIsImltcG9ydCB7IENMQVNTTkFNRSB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ob3B0aW9uLCBzZWxlY3QsIF90aGlzKSB7XG4gIG9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZCAgICAgICAgICAgICAgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1zZWxlY3QtaWQnKTtcbiAgICBzZWxlY3QudmFsdWUgICAgICAgID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTtcbiAgICBfdGhpcy5zZWxlY3RlZFZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtDTEFTU05BTUUuTEFCRUx9LSR7aWR9YCkuaW5uZXJIVE1MID0gdGhpcy5pbm5lckhUTUw7XG4gICAgX3RoaXMuaGlkZUxpc3RzKCk7XG4gICAgX3RoaXMuZXZlbnRzLmNoYW5nZSA/IF90aGlzLmV2ZW50cy5jaGFuZ2UoX3RoaXMuc2VsZWN0ZWRWYWx1ZSkgOiBudWxsO1xuICB9LCBmYWxzZSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIENMQVNTTkFNRToge1xuICAgIExBQkVMOiAnanMtbXlzZWxlY3QtbGFiZWwnLFxuICAgIExBQkVMX0ZPQ1VTOiAnanMtbXlzZWxlY3QtbGFiZWwtLWZvY3VzJyxcbiAgICBMSVNUX1ZBTFVFUzogJ2pzLW15c2VsZWN0LWxpc3QtdmFsdWVzJyxcbiAgICBMSVNUX1ZBTFVFU19WSVNJQkxFOiAnanMtbXlzZWxlY3QtbGlzdC12YWx1ZXMtLXZpc2libGUnLFxuICAgIElURU06ICdqcy1teXNlbGVjdC1pdGVtJyxcbiAgfSxcbn07XG4iLCJpbXBvcnQgeyBDTEFTU05BTUUgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgc2hvd0Ryb3Bkb3duIGZyb20gJy4vc2hvd0Ryb3BEb3duLmpzJztcbmltcG9ydCBiaW5kQ2xpY2tPcHRpb25zIGZyb20gJy4vYmluZENsaWNrT3B0aW9ucy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCwgY29udGFpbmVyLCBpZCkge1xuICB2YXIgbGFiZWwgICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB2YXIgdmFsdWVzTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB2YXIgX3RoaXMgICAgICA9IHRoaXM7XG5cbiAgbGFiZWwuY2xhc3NOYW1lICAgICAgPSBgJHtDTEFTU05BTUUuTEFCRUx9ICR7Q0xBU1NOQU1FLkxBQkVMfS0ke2lkfWA7XG4gIHZhbHVlc0xpc3QuY2xhc3NOYW1lID0gQ0xBU1NOQU1FLkxJU1RfVkFMVUVTO1xuXG4gIGxhYmVsLmlubmVySFRNTCA9IHNlbGVjdC5zZWxlY3RlZE9wdGlvbnNbMF0uaW5uZXJIVE1MO1xuXG4gIGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGlmIChfdGhpcy5pc0RldmljZSAmJiBfdGhpcy5uYXRpdmVPbkRldmljZSkge1xuICAgICAgX3RoaXMuc2hvd0Ryb3Bkb3duKHNlbGVjdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChDTEFTU05BTUUuTEFCRUxfRk9DVVMpO1xuICAgICAgdGhpcy5uZXh0U2libGluZy5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRS5MSVNUX1ZBTFVFU19WSVNJQkxFKTtcbiAgICB9XG4gIH0pO1xuXG4gIHRoaXMuZmFrZVNlbGVjdCA9IGxhYmVsO1xuXG4gIFtdLmZvckVhY2guY2FsbChzZWxlY3QuY2hpbGRyZW4sIChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgdmFyIGRpdk9wdGlvbiAgICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgZGl2T3B0aW9uLmNsYXNzTmFtZSA9IENMQVNTTkFNRS5JVEVNO1xuICAgIGRpdk9wdGlvbi5pbm5lckhUTUwgPSBvcHRpb24uaW5uZXJIVE1MO1xuICAgIGRpdk9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBvcHRpb24uZ2V0QXR0cmlidXRlKCd2YWx1ZScpKTtcbiAgICBkaXZPcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXNlbGVjdC1pZCcsIGlkKTtcbiAgICB2YWx1ZXNMaXN0LmFwcGVuZENoaWxkKGRpdk9wdGlvbik7XG5cbiAgICBiaW5kQ2xpY2tPcHRpb25zKGRpdk9wdGlvbiwgc2VsZWN0LCB0aGlzKTtcbiAgfSk7XG5cbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHZhbHVlc0xpc3QpO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYmluZENsaWNrT3V0KCl7dmFyIGU9dGhpcztkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbih0KXt2YXIgbj10LnRhcmdldC5jbGFzc0xpc3Q7bi5jb250YWlucyhfQ0xBU1NOQU1FLkNMQVNTTkFNRS5MQUJFTCl8fG4uY29udGFpbnMoX0NMQVNTTkFNRS5DTEFTU05BTUUuSVRFTSl8fGUuaGlkZUxpc3RzKCl9LCExKX12YXIgX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX0sX2NsYXNzQ2FsbENoZWNrPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0sX2NyZWF0ZUNsYXNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxpJiZlKHQsaSksdH19KCksX0NMQVNTTkFNRT1yZXF1aXJlKFwiLi9jb25zdGFudHMuanNcIiksX2NyZWF0ZURPTUVsZW1lbnRzPXJlcXVpcmUoXCIuL2NyZWF0ZURPTUVsZW1lbnRzLmpzXCIpLF9jcmVhdGVET01FbGVtZW50czI9X2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2NyZWF0ZURPTUVsZW1lbnRzKSxpPTAsU2VsZWN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtpZihfY2xhc3NDYWxsQ2hlY2sodGhpcyxlKSwhdHx8IXQuc2VsZWN0fHwhdC5jb250YWluZXIpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIm15LXNlbGVjdCBlcnJvciA6IE1pc3Npbmcgb3B0aW9uc1wiKTt2YXIgbj10LnNlbGVjdCxyPXQuY29udGFpbmVyO3JldHVybiB0aGlzLnNlbGVjdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKG4pLHRoaXMuY29udGFpbmVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IociksdGhpcy5zZWxlY3RlZFZhbHVlPW51bGwsdGhpcy5mYWtlU2VsZWN0PW51bGwsdGhpcy5ldmVudHM9e30sdGhpcy5pZD1pLHRoaXMubmF0aXZlT25EZXZpY2U9ISF0Lm5hdGl2ZU9uRGV2aWNlLHRoaXMuaXNEZXZpY2U9XCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCx0aGlzLnNlbGVjdD90aGlzLmNvbnRhaW5lcj8oX2NyZWF0ZURPTUVsZW1lbnRzMltcImRlZmF1bHRcIl0uY2FsbCh0aGlzLHRoaXMuc2VsZWN0LHRoaXMuY29udGFpbmVyLHRoaXMuaWQpLHZvaWQgYmluZENsaWNrT3V0LmNhbGwodGhpcykpOnZvaWQgY29uc29sZS5lcnJvcihcIm15LXNlbGVjdCBlcnJvciA6IGNvbnRhaW5lciBOb2RlIG5vdCBmb3VuZFwiKTp2b2lkIGNvbnNvbGUuZXJyb3IoXCJteS1zZWxlY3QgZXJyb3IgOiBzZWxlY3QgTm9kZSBub3QgZm91bmRcIil9cmV0dXJuIF9jcmVhdGVDbGFzcyhlLFt7a2V5OlwiaGlkZUxpc3RzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZha2VTZWxlY3QuY2xhc3NMaXN0LnJlbW92ZShfQ0xBU1NOQU1FLkNMQVNTTkFNRS5MQUJFTF9GT0NVUyksdGhpcy5mYWtlU2VsZWN0Lm5leHRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoX0NMQVNTTkFNRS5DTEFTU05BTUUuTElTVF9WQUxVRVNfVklTSUJMRSl9fSx7a2V5Olwib25cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuZXZlbnRzW2VdPXQuYmluZCh0aGlzKX19XSksZX0oKTttb2R1bGUuZXhwb3J0cz1TZWxlY3Q7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZWxlbWVudCkge1xuICB2YXIgZXZlbnQ7XG4gIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gIGV2ZW50LmluaXRNb3VzZUV2ZW50KCdtb3VzZWRvd24nLCB0cnVlLCB0cnVlLCB3aW5kb3cpO1xuICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufVxuIl19
